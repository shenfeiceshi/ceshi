<!--pages/profile/account-security/account-security.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="nav-bar">
    <view class="nav-back" bindtap="goBack">
      <text>â†</text>
    </view>
    <view class="nav-title">è´¦å·å®‰å…¨</view>
  </view>

  <!-- é¡µé¢å†…å®¹ -->
  <view class="content">
    <!-- ä¿®æ”¹å¯†ç è¡¨å• -->
    <view class="password-section">
      <view class="section-title">
        <text class="section-icon">ğŸ”’</text>
        ä¿®æ”¹å¯†ç 
      </view>
      
      <view class="password-form">
        <!-- å½“å‰å¯†ç  -->
        <view class="form-item">
          <view class="form-label">å½“å‰å¯†ç </view>
          <view class="input-wrapper">
            <text class="input-icon">ğŸ”’</text>
            <input class="form-input" 
                   type="password" 
                   placeholder="è¯·è¾“å…¥å½“å‰å¯†ç " 
                   value="{{passwordForm.oldPassword}}"
                   bindinput="onOldPasswordInput"
                   maxlength="20" />
          </view>
          <view class="error-msg" wx:if="{{passwordErrors.oldPassword}}">{{passwordErrors.oldPassword}}</view>
        </view>

        <!-- æ–°å¯†ç  -->
        <view class="form-item">
          <view class="form-label">æ–°å¯†ç </view>
          <view class="input-wrapper">
            <text class="input-icon">ğŸ”’</text>
            <input class="form-input" 
                   type="password" 
                   placeholder="è¯·è¾“å…¥æ–°å¯†ç ï¼ˆ6-20ä½ï¼‰" 
                   value="{{passwordForm.newPassword}}"
                   bindinput="onNewPasswordInput"
                   maxlength="20" />
          </view>
          <view class="error-msg" wx:if="{{passwordErrors.newPassword}}">{{passwordErrors.newPassword}}</view>
        </view>

        <!-- ç¡®è®¤æ–°å¯†ç  -->
        <view class="form-item">
          <view class="form-label">ç¡®è®¤æ–°å¯†ç </view>
          <view class="input-wrapper">
            <text class="input-icon">ğŸ”’</text>
            <input class="form-input" 
                   type="password" 
                   placeholder="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç " 
                   value="{{passwordForm.confirmPassword}}"
                   bindinput="onConfirmPasswordInput"
                   maxlength="20" />
          </view>
          <view class="error-msg" wx:if="{{passwordErrors.confirmPassword}}">{{passwordErrors.confirmPassword}}</view>
        </view>

        <!-- æäº¤æŒ‰é’® -->
        <button class="submit-button" 
                bindtap="changePassword" 
                disabled="{{isChangingPassword}}"
                loading="{{isChangingPassword}}">
          {{isChangingPassword ? 'ä¿®æ”¹ä¸­...' : 'ç¡®è®¤ä¿®æ”¹'}}
        </button>
      </view>
    </view>
  </view>
</view>

<!-- Toast ç»„ä»¶ -->
<van-toast id="van-toast" />
<van-dialog id="van-dialog" />