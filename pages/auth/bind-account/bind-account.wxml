<!--账号绑定页面-->
<view class="bind-account-container">

  <!-- 用户信息展示 -->
  <view class="user-info-card">
    <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
    <view class="user-details">
      <view class="nickname">{{userInfo.nickName || '微信用户'}}</view>
      <view class="desc">为了账号安全，请绑定{{bindType === 'phone' ? '手机号' : '邮箱'}}并设置密码</view>
    </view>
  </view>

  <!-- 绑定类型选择 -->
  <view class="bind-type-section">
    <view class="section-title">选择绑定方式</view>
    <radio-group bindchange="onBindTypeChange">
      <view class="radio-item">
        <radio value="phone" checked="{{bindType === 'phone'}}" color="#FF6B35"/>
        <text class="radio-label">手机号绑定</text>
      </view>
      <view class="radio-item">
        <radio value="email" checked="{{bindType === 'email'}}" color="#FF6B35"/>
        <text class="radio-label">邮箱绑定</text>
      </view>
    </radio-group>
  </view>

  <!-- 绑定表单 -->
  <view class="form-card">
    <!-- 账号输入 -->
    <view class="form-item">
      <view class="form-label">
        <text>{{bindType === 'phone' ? '📱' : '📧'}}</text>
        {{bindType === 'phone' ? '手机号' : '邮箱地址'}}
      </view>
      <input 
        class="form-input {{errors.account ? 'error' : ''}}"
        type="{{bindType === 'phone' ? 'number' : 'text'}}"
        placeholder="{{bindType === 'phone' ? '请输入手机号' : '请输入邮箱地址'}}"
        value="{{account}}"
        bindinput="onAccountInput"
        maxlength="{{bindType === 'phone' ? 11 : 50}}"
      />
      <view class="error-msg" wx:if="{{errors.account}}">{{errors.account}}</view>
    </view>

    <!-- 验证码输入 -->
    <view class="form-item">
      <view class="form-label">
        <text>🔢</text>
        验证码
      </view>
      <view class="verify-code-row">
        <input 
          class="form-input verify-input {{errors.verifyCode ? 'error' : ''}}"
          type="number"
          placeholder="请输入验证码"
          value="{{verifyCode}}"
          bindinput="onVerifyCodeInput"
          maxlength="6"
        />
        <button 
          class="send-code-btn {{countdown > 0 ? 'disabled' : ''}}"
          bindtap="sendVerifyCode"
          disabled="{{countdown > 0}}"
        >
          {{countdown > 0 ? countdown + 's' : '发送验证码'}}
        </button>
      </view>
      <view class="error-msg" wx:if="{{errors.verifyCode}}">{{errors.verifyCode}}</view>
    </view>

    <!-- 密码输入 -->
    <view class="form-item">
      <view class="form-label">
        <text>🔒</text>
        设置密码
      </view>
      <input 
        class="form-input {{errors.password ? 'error' : ''}}"
        type="password"
        placeholder="请设置6-20位密码，包含字母和数字"
        value="{{password}}"
        bindinput="onPasswordInput"
        maxlength="20"
      />
      <view class="error-msg" wx:if="{{errors.password}}">{{errors.password}}</view>
    </view>

    <!-- 确认密码输入 -->
    <view class="form-item">
      <view class="form-label">
        <text>🔒</text>
        确认密码
      </view>
      <input 
        class="form-input {{errors.confirmPassword ? 'error' : ''}}"
        type="password"
        placeholder="请再次输入密码"
        value="{{confirmPassword}}"
        bindinput="onConfirmPasswordInput"
        maxlength="20"
      />
      <view class="error-msg" wx:if="{{errors.confirmPassword}}">{{errors.confirmPassword}}</view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-section">
    <button 
      class="submit-btn {{loading ? 'loading' : ''}}"
      bindtap="submitBind"
      disabled="{{loading}}"
    >
      {{loading ? '绑定中...' : '确认绑定'}}
    </button>
  </view>

  <!-- 安全提示 -->
  <view class="security-tips">
    <view class="tips-title">
      <text>🛡️</text>
      安全提示
    </view>
    <view class="tips-content">
      <view class="tip-item">• 绑定后可使用{{bindType === 'phone' ? '手机号' : '邮箱'}}和密码登录</view>
      <view class="tip-item">• 密码将用于保护您的账号安全</view>
      <view class="tip-item">• 请妥善保管您的登录信息</view>
    </view>
  </view>
</view>