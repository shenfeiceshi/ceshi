<!--æŠ½å¥–ç®¡ç†é¡µé¢-->
<view class="page-container">
  <!-- å¯¼èˆªæ  -->
  <view class="navbar">
    <view class="nav-left" bindtap="goBack">
      <text class="nav-icon">â†</text>
      <text class="nav-title">æŠ½å¥–ç®¡ç†</text>
    </view>
  </view>

  <!-- å…¨å±€è®¾ç½® -->
  <view class="global-settings">
    <view class="setting-item">
      <text class="setting-label">æ¯è½®æŠ½å¥–æ¶ˆè€—ç§¯åˆ†</text>
      <view class="setting-input-group">
        <input class="setting-input" type="number" value="{{lotteryCost}}" bindinput="onCostInput" />
        <text class="setting-unit">ç§¯åˆ†</text>
      </view>
    </view>
  </view>

  <!-- å¥–å“ç®¡ç† -->
  <view class="prize-management">
    <view class="section-header">
      <text class="section-title">ğŸ å¥–å“ç®¡ç†</text>
      <view class="add-btn" bindtap="addPrize">
        <text class="add-icon">+</text>
        <text class="add-text">æ·»åŠ å¥–å“</text>
      </view>
    </view>
    
    <view class="prize-list">
      <view class="prize-item" wx:for="{{prizeList}}" wx:key="id">
        <text class="prize-emoji">{{item.emoji}}</text>
        <view class="prize-info">
          <text class="prize-name">{{item.name}}</text>
          <text class="prize-desc">{{item.description}}</text>
        </view>
        <view class="prize-probability">{{item.probability}}%</view>
        <view class="prize-actions">
          <view class="action-btn edit" bindtap="editPrize" data-id="{{item.id}}">
            <text>âœï¸</text>
          </view>
          <view class="action-btn delete" bindtap="deletePrize" data-id="{{item.id}}">
            <text>ğŸ—‘ï¸</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- æ·»åŠ /ç¼–è¾‘å¥–å“å¼¹çª— -->
<view class="prize-modal {{showPrizeModal ? 'show' : ''}}" bindtap="closePrizeModal">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">{{editMode === 'add' ? 'æ·»åŠ å¥–å“' : 'ç¼–è¾‘å¥–å“'}}</text>
      <text class="modal-close" bindtap="closePrizeModal">âœ•</text>
    </view>
    <view class="modal-body">
      <view class="form-item">
        <text class="form-label">å¥–å“åç§°</text>
        <input class="form-input" placeholder="è¯·è¾“å…¥å¥–å“åç§°" value="{{currentPrize.name}}" bindinput="onNameInput"/>
      </view>
      <view class="form-item">
        <text class="form-label">å¥–å“æè¿°</text>
        <textarea class="form-textarea" placeholder="è¯·è¾“å…¥å¥–å“æè¿°" value="{{currentPrize.description}}" bindinput="onDescInput"/>
      </view>
      <view class="form-item">
        <text class="form-label">ä¸­å¥–æ¦‚ç‡ (%)</text>
        <input class="form-input" type="number" placeholder="è¯·è¾“å…¥æ¦‚ç‡" value="{{currentPrize.probability}}" bindinput="onProbabilityInput"/>
      </view>
      <view class="form-item">
        <text class="form-label">å¥–å“å›¾æ ‡</text>
        <view class="emoji-selector">
          <text class="emoji-item {{currentPrize.emoji === item ? 'selected' : ''}}" 
                wx:for="{{emojiList}}" wx:key="*this"
                bindtap="selectEmoji" data-emoji="{{item}}">{{item}}</text>
        </view>
      </view>
    </view>
    <view class="modal-footer">
      <view class="modal-btn cancel" bindtap="closePrizeModal">å–æ¶ˆ</view>
      <view class="modal-btn confirm" bindtap="confirmPrize">{{editMode === 'add' ? 'æ·»åŠ ' : 'ä¿å­˜'}}</view>
    </view>
  </view>
</view>